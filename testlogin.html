<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>baishun's ajax</title>
    <script src="js/jquery.min.js"></script>

</head>
<body>

<button onclick="login()">发送一个 HTTP POST 请求页面并获取返回内容</button>

</body>

<script>
    function setCookie(cname,cvalue,exdays){
        var d = new Date();
        d.setTime(d.getTime()+(exdays*24*60*60*1000));
        var expires = "expires="+d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
    }
    function getCookie(cname){
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
            var c = ca[i].trim();
            if (c.indexOf(name)==0) { return c.substring(name.length,c.length); }
        }
        return "";
    }

    function login() {
//        setCookie("mytest","  this is a test",30);
         var user=getCookie("mytest");
        alert("mytest:" + user);
        $.ajax({
            url: "http://193.112.18.21:8080/login",
            type: 'post',
            data: {Username:"CUILIJIAy", Password:"CUILIJIAy"},
            dataType: 'json',
            success: function (data,s1,s2,s3,s4) {
                alert("response:\n" + "code:" +data.code + "\nres:" +data.res+"\nstatus:" +s1+"\nContent-Type:"+s2.getResponseHeader("Content-Type")+"\nFaygosessionid:"+s2.getResponseHeader("Faygosessionid"));
                var sessionID=getCookie('faygosessionID');
                alert("faygosessionID:" + sessionID);
                user=getCookie("mytest");
                alert("mytest:" + user);
            }
        });

    }
</script>
</html>
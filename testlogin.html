<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>baishun's ajax</title>
    <script src="js/jquery.min.js"></script>

</head>
<body>

<button onclick="login()">发送一个 HTTP POST 请求页面并获取返回内容</button>
<button onclick="newpage()">new</button>
<button onclick="getcuilijia()">get</button>

</body>

<script>
    function setCookie(cname,cvalue,exdays){
        var d = new Date();
        d.setTime(d.getTime()+(exdays*24*60*60*1000));
        var expires = "expires="+d.toGMTString();
        document.cookie = cname+"="+cvalue+"; "+expires;
    }
    function getCookie(cname){
        var name = cname + "=";
        var ca = document.cookie.split(';');
        for(var i=0; i<ca.length; i++) {
            var c = ca[i].trim();
            if (c.indexOf(name)==0) { return c.substring(name.length,c.length); }
        }
        return "";
    }

    function login() {
//        setCookie("mytest","  this is a test",30);
         var user=getCookie("mytest");
        alert("mytest:" + user);
        $.ajax({
            url: "http://193.112.18.21:8080/login",
            type: 'post',
            data: {Username:"CUILIJIAy", Password:"CUILIJIAy"},
            dataType: 'json',
            success: function (data,s1,s2,s3,s4) {
                alert("response:\n" + "code:" +data.code + "\nres:" +data.res+"\nstatus:" +s1+"\nContent-Type:"+s2.getResponseHeader("Content-Type")+"\nFaygosessionid:"+s2.getResponseHeader("Faygosessionid"));
                var sessionID=getCookie('faygosessionID');
                alert("faygosessionID:" + sessionID);
                user=getCookie("mytest");
                alert("mytest:" + user);
            }
        });

    }

    function newpage() {
        compare1="cuilijia";
        compare2="lijiacui";
        url="testlogin.html?compare1="+compare1+"&compare2="+compare2 ;
        window.location.href=url;
    }
    function getcuilijia() {
        var Request = new Object();
        Request = GetRequest();
        var compare1,compare2;
        compare1 = Request["compare1"];
        compare2 = Request["compare2"];
        alert("c1="+compare1+"      c2="+compare2);
    }

    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for(var i = 0; i < strs.length; i ++) {
                theRequest[strs[i].split("=")[0]]=unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
</script>
</html>